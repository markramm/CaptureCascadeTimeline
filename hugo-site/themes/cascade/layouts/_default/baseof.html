<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode }}">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ block "title" . }}{{ .Title }} | {{ .Site.Title }}{{ end }}</title>
    <meta name="description" content="{{ with .Description }}{{ . }}{{ else }}{{ .Site.Params.description }}{{ end }}">
    <meta name="author" content="{{ .Site.Params.author }}">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="{{ .Permalink }}">
    <meta property="og:title" content="{{ .Title }}">
    <meta property="og:description" content="{{ with .Description }}{{ . }}{{ else }}{{ .Site.Params.description }}{{ end }}">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="{{ .Permalink }}">
    <meta property="twitter:title" content="{{ .Title }}">
    <meta property="twitter:description" content="{{ with .Description }}{{ . }}{{ else }}{{ .Site.Params.description }}{{ end }}">

    <!-- Canonical URL -->
    <link rel="canonical" href="{{ .Permalink }}">

    <!-- RSS -->
    {{ with .OutputFormats.Get "rss" -}}
        {{ printf `<link rel=%q type=%q href=%q title=%q>` .Rel .MediaType.Type .Permalink $.Site.Title | safeHTML }}
    {{ end -}}

    <!-- JSON-LD Structured Data -->
    {{ block "structured-data" . }}{{ end }}

    <!-- Landing Page Styles (only for home) -->
    {{ if .IsHome }}
    <link rel="stylesheet" href="{{ "css/landing.css" | absURL }}">
    {{ end }}

    <!-- Privacy-friendly analytics by Plausible -->
    <script async src="https://plausible.io/js/pa-nNROWp3fTa6NVDj4WUHkn.js"></script>
    <script>
      window.plausible=window.plausible||function(){(plausible.q=plausible.q||[]).push(arguments)},plausible.init=plausible.init||function(i){plausible.o=i||{}};
      plausible.init()
    </script>

    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            line-height: 1.6;
            background: #0f172a;
            color: #e5e7eb;
            min-height: 100vh;
        }

        /* Navigation Bar - matches React viewer */
        .navigation-bar {
            background: #1e293b;
            border-bottom: 1px solid #334155;
            position: sticky;
            top: 0;
            z-index: 100;
            width: 100%;
        }

        .nav-container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 0 1.5rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 60px;
        }

        .nav-brand {
            flex-shrink: 0;
        }

        .brand-link {
            color: #e5e7eb;
            text-decoration: none;
            font-size: 1.25rem;
            font-weight: 700;
            transition: color 0.2s;
        }

        .brand-link:hover {
            color: #3b82f6;
        }

        .nav-links {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .nav-links li {
            margin: 0;
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            color: #94a3b8;
            text-decoration: none;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            transition: all 0.2s;
            white-space: nowrap;
        }

        .nav-link:hover {
            background: rgba(59, 130, 246, 0.1);
            color: #3b82f6;
        }

        .nav-links li.active .nav-link {
            background: rgba(59, 130, 246, 0.2);
            color: #3b82f6;
            font-weight: 500;
        }

        /* Main content area */
        .content-wrapper {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1.5rem;
        }

        /* Page header (non-home pages) */
        header.page-header {
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid #334155;
        }

        header.page-header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            color: #e5e7eb;
        }

        header.page-header .subtitle {
            color: #94a3b8;
            font-size: 1.125rem;
        }

        /* Main content */
        main {
            min-height: 60vh;
        }

        /* Typography */
        h1, h2, h3, h4, h5, h6 {
            color: #e5e7eb;
            margin-top: 2rem;
            margin-bottom: 1rem;
        }

        h1 { font-size: 2.5rem; }
        h2 { font-size: 2rem; }
        h3 { font-size: 1.5rem; }

        p {
            margin-bottom: 1rem;
            color: #cbd5e1;
        }

        a {
            color: #60a5fa;
            text-decoration: none;
            transition: color 0.2s;
        }

        a:hover {
            color: #93c5fd;
        }

        /* Event cards/lists */
        .event-card {
            background: #1e293b;
            border: 1px solid #334155;
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            transition: all 0.2s;
        }

        .event-card:hover {
            border-color: #475569;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }

        .event-title {
            color: #e5e7eb;
            font-size: 1.25rem;
            margin-bottom: 0.5rem;
        }

        .event-meta {
            color: #94a3b8;
            font-size: 0.875rem;
            margin-bottom: 1rem;
        }

        .event-summary {
            color: #cbd5e1;
            line-height: 1.7;
        }

        /* Tags and badges */
        .tag, .actor {
            display: inline-block;
            background: rgba(59, 130, 246, 0.2);
            border: 1px solid rgba(59, 130, 246, 0.3);
            color: #93c5fd;
            padding: 0.25rem 0.75rem;
            border-radius: 0.375rem;
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
            font-size: 0.875rem;
        }

        /* Sources section */
        .sources {
            margin-top: 2rem;
            padding: 1.5rem;
            background: rgba(30, 41, 59, 0.5);
            border: 1px solid #334155;
            border-left: 3px solid #3b82f6;
            border-radius: 0.5rem;
        }

        .sources h3, .sources h4 {
            color: #e5e7eb;
            margin-top: 0;
            margin-bottom: 1rem;
        }

        .sources ul {
            margin-left: 1.5rem;
        }

        .sources li {
            margin-bottom: 0.75rem;
            color: #cbd5e1;
        }

        /* Footer */
        footer.page-footer {
            margin-top: 4rem;
            padding: 2rem 1.5rem;
            border-top: 1px solid #334155;
            background: #1e293b;
        }

        footer.page-footer p {
            color: #94a3b8;
            font-size: 0.9rem;
            text-align: center;
        }

        /* Lists */
        ul, ol {
            margin-left: 1.5rem;
            margin-bottom: 1rem;
        }

        li {
            margin-bottom: 0.5rem;
            color: #cbd5e1;
        }

        /* Mobile responsive */
        @media (max-width: 768px) {
            .nav-container {
                padding: 0 1rem;
                flex-wrap: wrap;
                gap: 0.75rem;
                min-height: 60px;
                height: auto;
            }

            .nav-brand {
                width: 100%;
                text-align: center;
                padding: 0.75rem 0;
            }

            .brand-link {
                font-size: 1.125rem;
            }

            .nav-links {
                width: 100%;
                justify-content: center;
                flex-wrap: wrap;
                gap: 0.25rem;
                padding-bottom: 0.75rem;
            }

            .nav-link span {
                display: none;
            }

            .nav-link {
                padding: 0.5rem;
                font-size: 0.75rem;
            }

            .content-wrapper {
                padding: 1rem;
            }

            header.page-header h1 {
                font-size: 2rem;
            }
        }

        /* Hide home page styling elements on non-home pages */
        body:not(.home-page) .landing-page {
            display: none;
        }
    </style>
</head>
<body{{ if .IsHome }} class="home-page"{{ end }}>
    <!-- Navigation Bar -->
    {{ partial "navigation.html" . }}

    <!-- Non-home page header -->
    {{ if not .IsHome }}
    <div class="content-wrapper">
        {{ if not (in .Permalink "/events/") }}
        <header class="page-header">
            <h1>{{ .Title }}</h1>
            {{ with .Description }}
            <p class="subtitle">{{ . }}</p>
            {{ end }}
        </header>
        {{ end }}

        <main>
            {{ block "main" . }}{{ end }}
        </main>

        <footer class="page-footer">
            <p>&copy; {{ now.Year }} {{ .Site.Title }}</p>
            <p>
                Data: <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a> |
                Code: <a href="https://opensource.org/licenses/MIT">MIT License</a>
            </p>
        </footer>
    </div>
    {{ else }}
    <!-- Home page content -->
    <main>
        {{ block "main" . }}{{ end }}
    </main>
    {{ end }}
</body>
</html>
